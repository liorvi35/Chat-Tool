#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>

int main() {
  // Open the shared memory file
  int fd = open("shared_memory", O_RDONLY);
  if (fd < 0) {
    perror("open");
    exit(1);
  }

  // Get the size of the shared memory file
  struct stat stat;
  fstat(fd, &stat);
  size_t size = stat.st_size;

  // Map the shared memory file into memory
  void *ptr = mmap(NULL, size, PROT_READ, MAP_SHARED, fd, 0);
  if (ptr == MAP_FAILED) {
    perror("mmap");
    exit(1);
  }

  // Read data from the shared memory
  char buf[1024];
  int bytes_read = read(ptr, buf, sizeof(buf));
  if (bytes_read < 0) {
    perror("read");
    exit(1);
  }

  // Print the data
  printf("Received: %s\n", buf);

  // Close the shared memory file
  close(fd);

  return 0;
}
